Crea y refina estos casos de uso segun lo que ya tienes y lo que haremos, mejora todo para un mejor flujo de trabajo y una app muy optimizada en todos los sentidos, rapida, consistente, funcional y aprueba de errores.

graph TB
    subgraph "üë®‚Äçüíº Casos de Uso - Jefe"
        CU1[Gestionar Inventario]
        CU2[Asignar Cilindros Diarios]
        CU3[Monitorear En Ruta]
        CU4[Registrar Llegada Cami√≥n]
        CU5[Generar Reportes]
        CU6[Configurar Metas]
        CU7[Gestionar Precios]
        CU8[Autorizar Ediciones]
    end
    
    subgraph "üë®‚Äçüíª Casos de Uso - Vendedor"
        CU9[Registrar Venta]
        CU10[Registrar Gasto]
        CU11[Solicitar Edici√≥n]
        CU12[Ver Historial Personal]
    end
    
    subgraph "üîÑ Casos de Uso - Sistema"
        CU13[Actualizar Inventario]
        CU14[Calcular Rentabilidad]
        CU15[Resetear Datos Diarios]
        CU16[Generar Alertas]
    end

    Casos de uso - Vendedor :
    # Diagramas

[Caso de uso - registrar ventas](https://www.notion.so/Caso-de-uso-registrar-ventas-2450091da98c80918b4de4d67a8c5f00?pvs=21)

[CU-009: USOS GENERALES (Detallado)](https://www.notion.so/CU-009-USOS-GENERALES-Detallado-23d0091da98c80088259da85dc0f77fd?pvs=21)

[**Diagrama de Estados del Sistema M√≥vil**](https://www.notion.so/Diagrama-de-Estados-del-Sistema-M-vil-23e0091da98c8061a9fae125d5a8913c?pvs=21)

[CU-010: Registrar Gasto (Detallado)](https://www.notion.so/CU-010-Registrar-Gasto-Detallado-23e0091da98c80029454eb88faa0aa6d?pvs=21)

[CU-011: Solicitar Edici√≥n (Detallado)](https://www.notion.so/CU-011-Solicitar-Edici-n-Detallado-23e0091da98c80959266eae6f2243795?pvs=21)

[CU-012: Ver Historial Personal (Detallado)](https://www.notion.so/CU-012-Ver-Historial-Personal-Detallado-23e0091da98c804fb32ae3cad0930d38?pvs=21)

[CU-012: Ver Historial Personal (Detallado)](https://www.notion.so/CU-012-Ver-Historial-Personal-Detallado-23e0091da98c8044b102c9a3c04d3b02?pvs=21)

## üì± CU-009: Registrar Venta

### **Actor:** Vendedor

### **Descripci√≥n:** Registrar una venta realizada a un cliente desde la aplicaci√≥n m√≥vil

### **Precondiciones:**

- Usuario autenticado como vendedor en dispositivo m√≥vil
- Tener cilindros asignados para la ruta del d√≠a
- Conexi√≥n a internet disponible

### **Flujo Principal:**

1. Accede al formulario de registro de ventas desde la app m√≥vil
2. Completa los datos del cliente:
    - Nombre completo del cliente (obligatorio)
    - Tel√©fono (opcional)
    - Ubicaci√≥n espec√≠fica (Ruta/Pueblo/Direcci√≥n) (obligatorio)
3. Selecciona el tipo de producto:
    - Cilindro de 33 libras (15 kg)
    - Cilindro de 40 libras (18 kg)
    - Cilindro de 100 libras (45 kg)
4. Especifica el tipo de venta:
    - **Intercambio:** Cliente entrega cilindro vac√≠o y recibe lleno
    - **Completa:** Cliente solo paga y recibe cilindro lleno
    - **Venta de vac√≠os:** Cliente compra solo el envase
5. Si es intercambio, registra:
    - Marca del cilindro vac√≠o recibido
    - Color del cilindro vac√≠o recibido
6. Ingresa el valor cobrado al cliente
7. Selecciona m√©todo de pago:
    - Efectivo
    - Transferencia
    - Cr√©dito
8. Sistema valida la informaci√≥n y actualiza autom√°ticamente:
    - Inventario general
    - Card "En Ruta" del vendedor
9. Confirma el registro exitoso

### **Flujos Alternativos:**

- **4a.** Si es transferencia: Debe enviar comprobante al jefe por WhatsApp inmediatamente
- **8a.** Si hay error de conectividad: Sistema guarda localmente y sincroniza cuando hay conexi√≥n

### **Postcondiciones:**

- Venta registrada en el sistema
- Inventario actualizado autom√°ticamente
- Card "En Ruta" actualizado con la nueva venta
- Timestamp autom√°tico registrado

---

## üí∏ CU-010: Registrar Gasto

### **Actor:** Vendedor

### **Descripci√≥n:** Registrar un gasto operativo realizado durante la jornada de trabajo

### **Precondiciones:**

- Usuario autenticado como vendedor en dispositivo m√≥vil
- Conexi√≥n a internet disponible

### **Flujo Principal:**

1. Accede al formulario de registro de gastos desde la app m√≥vil
2. Selecciona el tipo de gasto:
    - Gasolina
    - Comida
    - Imprevistos
    - Reparaciones
    - Otros
3. Ingresa el valor exacto del gasto
4. Proporciona descripci√≥n detallada del gasto
5. Sistema registra autom√°ticamente fecha y hora
6. Confirma el registro del gasto
7. Sistema actualiza autom√°ticamente:
    - Total de gastos del d√≠a en card "En Ruta"
    - Margen del d√≠a (ventas - gastos)
8. Gasto se visualiza en color rojo para identificaci√≥n r√°pida

### **Flujos Alternativos:**

- **6a.** Si tiene comprobante: Debe enviarlo al jefe por WhatsApp
- **7a.** Si hay error de conectividad: Sistema guarda localmente y sincroniza cuando hay conexi√≥n

### **Postcondiciones:**

- Gasto registrado en el sistema
- Card "En Ruta" actualizado con el nuevo gasto
- Margen del d√≠a recalculado autom√°ticamente
- Visualizaci√≥n en rojo para identificaci√≥n

---

## ‚úèÔ∏è CU-011: Solicitar Edici√≥n

### **Actor:** Vendedor

### **Descripci√≥n:** Solicitar autorizaci√≥n al jefe para editar un registro de venta o gasto previamente realizado

### **Precondiciones:**

- Usuario autenticado como vendedor
- Tener un registro previo que necesita modificaci√≥n
- Registro debe ser del mismo d√≠a

### **Flujo Principal:**

1. Accede a su historial personal del d√≠a
2. Identifica el registro que necesita editar
3. Selecciona la opci√≥n "Solicitar Edici√≥n"
4. Especifica el motivo de la edici√≥n requerida
5. Sistema env√≠a notificaci√≥n autom√°tica al jefe
6. Espera respuesta del jefe (aprobaci√≥n o rechazo)
7. **Si es aprobado:** Puede proceder a editar el registro
8. **Si es rechazado:** Recibe notificaci√≥n con el motivo del rechazo

### **Flujos Alternativos:**

- **6a.** Si jefe no responde en tiempo determinado: Solicitud queda pendiente
- **7a.** Una vez editado: Sistema actualiza inventario y cards autom√°ticamente

### **Postcondiciones:**

- Solicitud de edici√≥n registrada
- Jefe notificado de la solicitud
- Si aprobado: Registro modificado y sistema actualizado

---

## üì± CU-012: Ver Historial Personal

### **Actor:** Vendedor

### **Descripci√≥n:** Visualizar √∫nicamente sus propias ventas y gastos del d√≠a actual

### **Precondiciones:**

- Usuario autenticado como vendedor en dispositivo m√≥vil

### **Flujo Principal:**

1. Accede a la secci√≥n "Mi Historial" en la app m√≥vil
2. Sistema muestra solo los registros del vendedor actual
3. Visualiza ventas del d√≠a con informaci√≥n b√°sica:
    - Cliente
    - Tipo de producto
    - Valor cobrado
    - Hora de la venta
4. Visualiza gastos del d√≠a (en color rojo):
    - Tipo de gasto
    - Valor
    - Descripci√≥n
    - Hora del gasto
5. Ve resumen del d√≠a:
    - Total de ventas realizadas
    - Total de gastos incurridos
    - Cilindros vendidos por tipo
6. Puede solicitar edici√≥n de cualquier registro si es necesario

### **Restricciones:**

- ‚ùå No puede ver datos de otros vendedores
- ‚ùå No puede ver datos de d√≠as anteriores
- ‚ùå No puede ver inventario general
- ‚ùå No puede ver reportes financieros

### **Postcondiciones:**

- Historial personal visualizado correctamente
- Solo informaci√≥n propia y del d√≠a actual mostrada

---

## üîê CU-013: Iniciar Sesi√≥n M√≥vil

### **Actor:** Vendedor

### **Descripci√≥n:** Autenticarse en la aplicaci√≥n m√≥vil para acceder a sus funciones permitidas

### **Precondiciones:**

- Tener credenciales v√°lidas (email y contrase√±a)
- Aplicaci√≥n m√≥vil instalada
- Conexi√≥n a internet

### **Flujo Principal:**

1. Abre la aplicaci√≥n m√≥vil
2. Ingresa email y contrase√±a en el formulario de login
3. Sistema valida credenciales
4. Sistema verifica que el rol sea "vendedor"
5. Redirecciona autom√°ticamente al panel m√≥vil optimizado
6. Carga funcionalidades espec√≠ficas para vendedores
7. Establece sesi√≥n persistente

### **Flujos Alternativos:**

- **3a.** Si credenciales incorrectas: Muestra error y permite reintentar
- **4a.** Si rol es "jefe": Redirecciona a dashboard completo
- **6a.** Si hay problemas de conectividad: Muestra mensaje de estado de conexi√≥n

### **Postcondiciones:**

- Usuario autenticado correctamente
- Acceso solo a funciones permitidas para vendedores
- Sesi√≥n establecida de forma segura

---

## üì≤ CU-014: Sincronizar Datos Offline

### **Actor:** Vendedor

### **Descripci√≥n:** Sincronizar autom√°ticamente los datos guardados localmente cuando se restablece la conexi√≥n a internet

### **Precondiciones:**

- Haber registrado ventas o gastos sin conexi√≥n
- Conexi√≥n a internet restablecida
- Usuario autenticado

### **Flujo Principal:**

1. Sistema detecta que se ha restablecido la conexi√≥n a internet
2. Identifica registros guardados localmente sin sincronizar
3. Valida la integridad de los datos locales
4. Env√≠a autom√°ticamente los datos al servidor
5. Actualiza inventario y cards "En Ruta" con la informaci√≥n sincronizada
6. Notifica al vendedor que los datos han sido sincronizados exitosamente
7. Limpia el almacenamiento local de datos ya sincronizados

### **Flujos Alternativos:**

- **4a.** Si hay conflictos de datos: Notifica al jefe para resoluci√≥n manual
- **4b.** Si la sincronizaci√≥n falla: Reintenta autom√°ticamente despu√©s de un tiempo

### **Postcondiciones:**

- Todos los datos locales sincronizados con el servidor
- Inventario y reportes actualizados correctamente
- Almacenamiento local limpiado

---

## üîî CU-015: Recibir Notificaciones

### **Actor:** Vendedor

### **Descripci√≥n:** Recibir notificaciones importantes del sistema y respuestas del jefe

### **Precondiciones:**

- Usuario autenticado como vendedor
- Notificaciones habilitadas en la aplicaci√≥n

### **Flujo Principal:**

1. Sistema genera notificaci√≥n por eventos relevantes:
    - Confirmaci√≥n de venta registrada
    - Confirmaci√≥n de gasto registrado
    - Respuesta a solicitud de edici√≥n (aprobada/rechazada)
    - Problemas de conectividad
    - Recordatorios importantes
2. Notificaci√≥n aparece en la aplicaci√≥n m√≥vil
3. Vendedor visualiza la notificaci√≥n
4. Puede tomar acci√≥n seg√∫n el tipo de notificaci√≥n
5. Marca notificaci√≥n como le√≠da

### **Tipos de Notificaciones:**

- ‚úÖ **√âxito:** Registros confirmados (verde)
- ‚ö†Ô∏è **Alerta:** Problemas de conexi√≥n (amarillo)
- üìù **Informaci√≥n:** Respuestas del jefe (azul)
- ‚ùå **Error:** Fallos en el sistema (rojo)

### **Postcondiciones:**

- Vendedor informado de eventos importantes
- Comunicaci√≥n efectiva mantenida con el sistema

---

## üìä Resumen de Restricciones del Vendedor

### ‚úÖ **Funciones Permitidas:**

- Registrar ventas desde m√≥vil
- Registrar gastos operativos
- Ver solo su historial personal del d√≠a
- Solicitar edici√≥n con autorizaci√≥n
- Recibir notificaciones del sistema
- Sincronizar datos offline

### ‚ùå **Funciones Restringidas:**

- Acceso al inventario general
- Ver datos de otros vendedores
- Acceder a reportes financieros
- Editar sin autorizaci√≥n del jefe
- Configurar precios
- Ver datos hist√≥ricos (d√≠as anteriores)
- Acceder desde dispositivos no m√≥viles (solo m√≥vil optimizado)

### üì± **Comunicaci√≥n Externa:**

- Todos los comprobantes de transferencia ‚Üí WhatsApp al jefe
- Evidencias de gastos ‚Üí WhatsApp al jefe
- Sin acceso a funciones de configuraci√≥n del sistema

Casos de uso - jefe 
## üìã √çNDICE DE CASOS DE USO

1. [CU-J001: Gestionar Inventario](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j001-gestionar-inventario)
2. [CU-J002: Asignar Cilindros Diarios](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j002-asignar-cilindros-diarios)
3. [CU-J003: Monitorear Panel "En Ruta"](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j003-monitorear-panel-en-ruta)
4. [CU-J004: Registrar Llegada de Cami√≥n](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j004-registrar-llegada-de-cami%C3%B3n)
5. [CU-J005: Generar Reportes Financieros](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j005-generar-reportes-financieros)
6. [CU-J006: Configurar y Seguir Metas](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j006-configurar-y-seguir-metas)
7. [CU-J007: Gestionar Precios Personalizados](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j007-gestionar-precios-personalizados)
8. [CU-J008: Autorizar Ediciones de Vendedores](https://claude.ai/chat/30c88d14-3285-4777-9028-1194a0c7db46#cu-j008-autorizar-ediciones-de-vendedores)

---

[Diagramas](https://www.notion.so/Diagramas-23b0091da98c809aa714d84133ea53d1?pvs=21)

## CU-J001: Gestionar Inventario

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Objetivo del Usuario
- **Frecuencia:** Continua (todo el d√≠a)
- **Prioridad:** ALTA

### üéØ Objetivo

Supervisar y controlar el inventario de cilindros llenos y vac√≠os en tiempo real, con capacidad de realizar ajustes manuales cuando sea necesario.

### ‚úÖ Precondiciones

- Jefe autenticado en el sistema
- Acceso desde PC, m√≥vil o tablet
- Base de datos de inventario inicializada

### üìù Flujo Principal

1. **Acceso al m√≥dulo:** Jefe accede al dashboard de inventario
2. **Visualizaci√≥n en tiempo real:** Sistema muestra:
    - Cilindros llenos por tipo (33, 40, 100 libras)
    - Cilindros vac√≠os por marca y color
    - Valor total del inventario
    - Alertas de stock bajo
3. **Consulta detallada:** Jefe puede ver:
    - Historial de movimientos
    - √öltima actualizaci√≥n
    - Costos unitarios actuales
4. **Ajustes manuales** (opcional):
    - Correcci√≥n de cantidades
    - Ajustes por p√©rdidas o da√±os
    - Notas explicativas del ajuste

### üîÑ Flujos Alternativos

- **A1 - Stock bajo:** Si hay cilindros con cantidad menor al l√≠mite, sistema muestra alerta roja
- **A2 - Ajuste manual:** Jefe puede corregir cantidades con justificaci√≥n obligatoria
- **A3 - Sin conexi√≥n:** Sistema muestra √∫ltimo estado conocido con indicador de desconexi√≥n

### ‚úÖ Postcondiciones

- Inventario consultado y actualizado si es necesario
- Registros de ajustes guardados con timestamp y justificaci√≥n
- Alertas de stock bajo identificadas

### ‚ö†Ô∏è Excepciones

- **E1:** Error de conexi√≥n - Mostrar estado offline
- **E2:** Datos inconsistentes - Solicitar verificaci√≥n
- **E3:** Ajuste excesivo - Confirmar operaci√≥n

---

## CU-J002: Asignar Cilindros Diarios

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Sub-funci√≥n
- **Frecuencia:** Diaria (inicio del d√≠a)
- **Prioridad:** ALTA

### üéØ Objetivo

Asignar cantidad espec√≠fica de cilindros a cada vendedor al inicio del d√≠a y crear los cards de seguimiento en el panel "En Ruta".

### ‚úÖ Precondiciones

- Inicio del d√≠a laboral (6:00 AM - 8:00 AM)
- Inventario de cilindros disponible
- Lista de vendedores activos

### üìù Flujo Principal

1. **Acceso a asignaciones:** Jefe accede al m√≥dulo de asignaciones diarias
2. **Selecci√≥n de vendedor:** Elige vendedor de la lista
3. **Asignaci√≥n por tipo:** Para cada tipo de cilindro:
    - Especifica cantidad a asignar (33, 40, 100 libras)
    - Sistema valida disponibilidad en inventario
4. **Confirmaci√≥n:** Revisa resumen de asignaci√≥n total
5. **Registro:** Sistema procesa la asignaci√≥n:
    - Coloca cilindros en estado STANDBY
    - Crea card en panel "En Ruta"
    - Mantiene inventario principal intacto
6. **Repetir:** Proceso se repite para cada vendedor

### üîÑ Flujos Alternativos

- **A1 - Stock insuficiente:** Sistema alerta y sugiere cantidad m√°xima disponible
- **A2 - Vendedor inactivo:** Sistema marca vendedor como no disponible
- **A3 - Reasignaci√≥n:** Jefe puede modificar asignaci√≥n antes de confirmar

### ‚úÖ Postcondiciones

- Cards "En Ruta" creados para cada vendedor
- Cilindros en estado STANDBY (no afectan inventario principal)
- Registro de asignaciones guardado

### ‚ö†Ô∏è Excepciones

- **E1:** Vendedor sin asignaci√≥n - Alerta para completar
- **E2:** Asignaci√≥n excede inventario - Solicitar ajuste
- **E3:** Error al crear card - Reintentar operaci√≥n

---

## CU-J003: Monitorear Panel "En Ruta"

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Objetivo del Usuario
- **Frecuencia:** Continua (durante el d√≠a)
- **Prioridad:** ALTA

### üéØ Objetivo

Supervisar en tiempo real la actividad diaria de todos los vendedores a trav√©s de cards informativos que se actualizan autom√°ticamente.

### ‚úÖ Precondiciones

- Asignaciones diarias completadas
- Vendedores iniciaron actividades
- Conexi√≥n activa al sistema

### üìù Flujo Principal

1. **Acceso al panel:** Jefe accede a "En Ruta" en dashboard
2. **Visualizaci√≥n de cards:** Para cada vendedor ve:
    - **Identificaci√≥n:** Nombre y ruta asignada
    - **Control de cilindros:**
        - Cantidad asignada por tipo
        - Cantidad vendida en tiempo real
        - Cantidad restante
        - Progreso visual (barras de porcentaje)
    - **Actividad financiera:**
        - Total ventas del d√≠a
        - Total gastos del d√≠a
        - Margen del d√≠a (ganancia neta)
3. **Monitoreo autom√°tico:** Cards se actualizan instant√°neamente con cada:
    - Venta registrada por vendedor
    - Gasto reportado por vendedor
4. **An√°lisis visual:** C√≥digo de colores:
    - üü¢ Verde: Metas cumplidas o en buen progreso
    - üü° Amarillo: Alertas o progreso lento
    - üî¥ Rojo: Problemas o muy por debajo de expectativas

### üîÑ Flujos Alternativos

- **A1 - Vendedor sin actividad:** Card muestra alerta de inactividad
- **A2 - Gastos excesivos:** Margen negativo se resalta en rojo
- **A3 - Meta diaria cumplida:** Card muestra indicador de √©xito

### ‚úÖ Postcondiciones

- Situaci√≥n operativa del d√≠a totalmente visible
- Decisiones informadas basadas en datos en tiempo real
- Identificaci√≥n temprana de problemas

### ‚ö†Ô∏è Excepciones

- **E1:** Card no actualiza - Verificar conexi√≥n del vendedor
- **E2:** Datos inconsistentes - Validar con vendedor
- **E3:** Sistema sobrecargado - Optimizar consultas

---

## CU-J004: Registrar Llegada de Cami√≥n

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Objetivo del Usuario
- **Frecuencia:** Seg√∫n llegadas de proveedores
- **Prioridad:** ALTA

### üéØ Objetivo

Registrar el reabastecimiento de inventario cuando llega el cami√≥n proveedor, actualizando autom√°ticamente inventario y costos.

### ‚úÖ Precondiciones

- Cami√≥n proveedor ha llegado f√≠sicamente
- Factura o documentos de entrega disponibles
- Jefe presente para verificar cantidades

### üìù Flujo Principal

1. **Acceso al registro:** Jefe accede al m√≥dulo "Llegadas de Cami√≥n"
2. **Registro de cilindros llenos recibidos:** Por cada tipo:
    - 33 libras: cantidad exacta recibida
    - 40 libras: cantidad exacta recibida
    - 100 libras: cantidad exacta recibida
3. **Registro de cilindros vac√≠os entregados:** Por marca y color:
    - Especifica cantidad entregada al proveedor
4. **Captura de informaci√≥n financiera cr√≠tica:**
    - **Valor unitario del d√≠a:** Precio por cilindro que cobra el proveedor
    - **Valor total de la factura:** Monto total de la compra
    - **Flete:** Costo de transporte (se anota pero no se descuenta del sistema)
5. **Confirmaci√≥n y procesamiento:** Sistema ejecuta autom√°ticamente:
    - Suma cilindros llenos al inventario
    - Resta cilindros vac√≠os del inventario
    - Actualiza precio de compra unitario
    - Recalcula rentabilidad para ventas futuras
    - Genera reporte de la transacci√≥n

### üîÑ Flujos Alternativos

- **A1 - Cantidades no coinciden:** Sistema permite ajuste con nota explicativa
- **A2 - Precio cambi√≥ significativamente:** Sistema solicita confirmaci√≥n
- **A3 - Factura posterior:** Permite registro parcial y completar despu√©s

### ‚úÖ Postcondiciones

- Inventario actualizado con nuevos cilindros
- Costos unitarios actualizados
- Rentabilidad recalculada autom√°ticamente
- Reporte de llegada generado

### ‚ö†Ô∏è Excepciones

- **E1:** Cantidad negativa - Validar y corregir
- **E2:** Precio unitario cero - Solicitar confirmaci√≥n
- **E3:** Error de c√°lculo - Verificar y recalcular

---

## CU-J005: Generar Reportes Financieros

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Objetivo del Usuario
- **Frecuencia:** Seg√∫n necesidad (diario/semanal/mensual)
- **Prioridad:** ALTA

### üéØ Objetivo

Generar reportes detallados de ingresos, costos, rentabilidad y desempe√±o para an√°lisis financiero y toma de decisiones.

### ‚úÖ Precondiciones

- Datos de ventas y gastos disponibles
- Per√≠odos de an√°lisis definidos
- Jefe autenticado con permisos completos

### üìù Flujo Principal

1. **Acceso a reportes:** Jefe accede al m√≥dulo de reportes
2. **Selecci√≥n de tipo de reporte:**
    - **Financiero:** Ingresos, costos, m√°rgenes
    - **Operativo:** Ventas por vendedor, productos
    - **Desempe√±o:** Cumplimiento de metas, eficiencia
3. **Configuraci√≥n de par√°metros:**
    - **Per√≠odo:** Diario, semanal, mensual, personalizado
    - **Vendedor:** Todos o espec√≠fico
    - **Tipo de producto:** Todos o espec√≠fico
4. **Generaci√≥n:** Sistema procesa y presenta:
    - **Resumen ejecutivo** con KPIs principales
    - **Gr√°ficos** de tendencias y comparativas
    - **Tablas detalladas** con datos espec√≠ficos
    - **An√°lisis autom√°tico** de variaciones y patrones
5. **Exportaci√≥n** (opcional): Descarga en PDF o Excel

### üîÑ Flujos Alternativos

- **A1 - Per√≠odo sin datos:** Sistema informa y sugiere per√≠odo alternativo
- **A2 - Reporte personalizado:** Jefe define m√©tricas espec√≠ficas
- **A3 - Comparativo hist√≥rico:** Contrasta con per√≠odos anteriores

### ‚úÖ Postcondiciones

- Reporte generado con informaci√≥n actualizada
- An√°lisis disponible para toma de decisiones
- Archivo exportado si fue solicitado

### ‚ö†Ô∏è Excepciones

- **E1:** Datos incompletos - Indicar qu√© informaci√≥n falta
- **E2:** Per√≠odo muy amplio - Sugerir segmentaci√≥n
- **E3:** Error de exportaci√≥n - Reintentar o cambiar formato

---

## CU-J006: Configurar y Seguir Metas

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Objetivo del Usuario
- **Frecuencia:** Configuraci√≥n: peri√≥dica / Seguimiento: continuo
- **Prioridad:** MEDIA

### üéØ Objetivo

Establecer metas de ventas (en kilogramos) para el negocio en general y para vendedores individuales, con seguimiento autom√°tico del progreso.

### ‚úÖ Precondiciones

- Hist√≥rico de ventas para referencia
- Estrategia comercial definida
- Vendedores activos en el sistema

### üìù Flujo Principal

1. **Acceso a metas:** Jefe accede al m√≥dulo de gesti√≥n de metas
2. **Selecci√≥n de tipo:**
    - **Meta general:** Para todo el negocio
    - **Meta individual:** Por vendedor espec√≠fico
3. **Configuraci√≥n de par√°metros:**
    - **Per√≠odo:** Semanal, mensual, semestral, anual
    - **Cantidad objetivo:** En kilogramos de gas
    - **Fechas:** Inicio y fin del per√≠odo
4. **Conversi√≥n autom√°tica:** Sistema configura conversi√≥n:
    - 33 libras = 15 kg
    - 40 libras = 18 kg
    - 100 libras = 45 kg
5. **Seguimiento en tiempo real:**
    - **Barras de progreso** visuales
    - **Porcentaje de cumplimiento**
    - **Proyecci√≥n** basada en tendencia actual
    - **Alertas** de cumplimiento o retraso

### üîÑ Flujos Alternativos

- **A1 - Meta muy alta:** Sistema alerta basado en hist√≥rico
- **A2 - Ajuste de meta:** Permite modificaci√≥n durante el per√≠odo
- **A3 - Meta cumplida anticipadamente:** Sistema felicita y sugiere nueva meta

### ‚úÖ Postcondiciones

- Metas establecidas y activas
- Sistema de seguimiento autom√°tico operando
- Vendedores informados de sus objetivos

### ‚ö†Ô∏è Excepciones

- **E1:** Meta negativa - Validar y corregir
- **E2:** Per√≠odo inv√°lido - Solicitar fechas correctas
- **E3:** Vendedor inactivo - Alertar y ajustar

---

## CU-J007: Gestionar Precios Personalizados

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Sub-funci√≥n
- **Frecuencia:** Seg√∫n necesidad comercial
- **Prioridad:** MEDIA

### üéØ Objetivo

Configurar precios especiales por cliente y gestionar la lista maestra de precios personalizados.

### ‚úÖ Precondiciones

- Lista de clientes disponible
- Precios est√°ndar definidos
- Estrategia comercial de precios establecida

### üìù Flujo Principal

1. **Acceso a gesti√≥n de precios:** Jefe accede al m√≥dulo de clientes
2. **Selecci√≥n de cliente:**
    - Buscar cliente existente, o
    - Crear nuevo cliente
3. **Configuraci√≥n de precios por tipo:**
    - Cilindro 33 libras: precio personalizado
    - Cilindro 40 libras: precio personalizado
    - Cilindro 100 libras: precio personalizado
4. **Validaci√≥n comercial:**
    - Sistema muestra precio est√°ndar vs. personalizado
    - Calcula impacto en margen de ganancia
    - Alerta si precio est√° por debajo del costo
5. **Aplicaci√≥n autom√°tica:** Una vez configurado:
    - Vendedores ven precio especial al seleccionar cliente
    - Sistema aplica precio autom√°ticamente
    - Historial de cambios se mantiene

### üîÑ Flujos Alternativos

- **A1 - Cliente sin precios especiales:** Usa precios est√°ndar autom√°ticamente
- **A2 - Precio promocional temporal:** Permite configurar fecha de expiraci√≥n
- **A3 - Modificaci√≥n masiva:** Ajuste porcentual a m√∫ltiples clientes

### ‚úÖ Postcondiciones

- Precios personalizados configurados y activos
- Sistema aplica autom√°ticamente en ventas
- Cambios registrados en historial

### ‚ö†Ô∏è Excepciones

- **E1:** Precio por debajo del costo - Alerta y confirmaci√≥n
- **E2:** Cliente duplicado - Verificar y fusionar si es necesario
- **E3:** Error de c√°lculo - Validar y recalcular

---

## CU-J008: Autorizar Ediciones de Vendedores

### üìä Informaci√≥n General

- **Actor Principal:** Jefe
- **Nivel:** Sub-funci√≥n
- **Frecuencia:** Seg√∫n solicitudes de vendedores
- **Prioridad:** MEDIA

### üéØ Objetivo

Aprobar o rechazar solicitudes de edici√≥n de registros de ventas o gastos realizadas por vendedores.

### ‚úÖ Precondiciones

- Vendedor ha solicitado permiso de edici√≥n
- Registro original existe en el sistema
- Jefe tiene permisos de autorizaci√≥n

### üìù Flujo Principal

1. **Notificaci√≥n de solicitud:** Sistema notifica al jefe sobre solicitud pendiente
2. **Revisi√≥n de la solicitud:** Jefe ve:
    - **Datos originales** del registro
    - **Cambios propuestos** por el vendedor
    - **Justificaci√≥n** de la modificaci√≥n
    - **Vendedor solicitante** y fecha/hora
3. **An√°lisis de la solicitud:**
    - Verificar consistencia de los datos
    - Evaluar justificaci√≥n presentada
    - Considerar impacto en reportes e inventario
4. **Decisi√≥n:**
    - **Aprobar:** Sistema permite la edici√≥n autom√°ticamente
    - **Rechazar:** Sistema notifica al vendedor con raz√≥n
5. **Registro de la autorizaci√≥n:** Queda registrado:
    - Decisi√≥n tomada (aprobada/rechazada)
    - Timestamp de la autorizaci√≥n
    - Comentarios del jefe (opcional)

### üîÑ Flujos Alternativos

- **A1 - Solicitud incompleta:** Sistema solicita m√°s informaci√≥n al vendedor
- **A2 - Edici√≥n mayor:** Jefe puede solicitar confirmaci√≥n adicional del vendedor
- **A3 - Autorizaci√≥n condicional:** Jefe aprueba con modificaciones espec√≠ficas

### ‚úÖ Postcondiciones

- Solicitud procesada (aprobada o rechazada)
- Vendedor notificado de la decisi√≥n
- Registro auditado con informaci√≥n completa
- Si fue aprobada: edici√≥n ejecutada autom√°ticamente

### ‚ö†Ô∏è Excepciones

- **E1:** Registro ya no existe - Informar impossibilidad de edici√≥n
- **E2:** Cambio afecta inventario cr√≠tico - Solicitar verificaci√≥n adicional
- **E3:** Vendedor no disponible - Procesar solicitud con nota explicativa

---

## üìä MATRIZ DE COMPLEJIDAD Y PRIORIDAD

| Caso de Uso | Prioridad | Complejidad | Dependencias |
| --- | --- | --- | --- |
| CU-J003: Monitorear "En Ruta" | ALTA | ALTA | CU-J002 |
| CU-J001: Gestionar Inventario | ALTA | MEDIA | Base de datos |
| CU-J004: Registrar Llegada Cami√≥n | ALTA | ALTA | CU-J001 |
| CU-J002: Asignar Cilindros Diarios | ALTA | MEDIA | CU-J001 |
| CU-J005: Generar Reportes | ALTA | ALTA | Todos los anteriores |
| CU-J006: Configurar Metas | MEDIA | MEDIA | CU-J005 |
| CU-J007: Gestionar Precios | MEDIA | BAJA | Base de clientes |
| CU-J008: Autorizar Ediciones | MEDIA | ALTA | Sistema de permisos |

---

## üéØ ORDEN DE IMPLEMENTACI√ìN SUGERIDO

### üî• Fase 1 - Base Operativa

1. CU-J001: Gestionar Inventario
2. CU-J002: Asignar Cilindros Diarios

### ‚ö° Fase 2 - Control Diario

1. CU-J003: Monitorear "En Ruta"
2. CU-J004: Registrar Llegada Cami√≥n

### üìä Fase 3 - An√°lisis y Control

1. CU-J005: Generar Reportes Financieros
2. CU-J007: Gestionar Precios Personalizados

### üéØ Fase 4 - Funciones Avanzadas

1. CU-J006: Configurar y Seguir Metas
2. CU-J008: Autorizar Ediciones de Vendedores

Casos de uso - sistema (Creo que faltan algunos, crea los que faltan):

## **CU-013: Actualizar Inventario:**

Maneja autom√°ticamente todos los cambios de inventario seg√∫n el tipo de transacci√≥n

```mermaid
---
config:
  layout: dagre
---
flowchart TD
    A["üîÑ Sistema recibe transacci√≥n"] --> B{"¬øTipo de transacci√≥n?"}
    B -- Venta Intercambio --> C["üì¶ -1 Cilindro Lleno"]
    C --> D["üî¥ +1 Cilindro Vac√≠o"]
    D --> E["üíæ Actualiza BD inventario_full"]
    E --> F["üíæ Actualiza BD inventory_empty"]
    B -- Venta Completa --> G["üì¶ -1 Cilindro Lleno"]
    G --> H["üíæ Actualiza BD inventory_full"]
    B -- Venta Vac√≠os --> I["üî¥ -1 Cilindro Vac√≠o"]
    I --> J["üíæ Actualiza BD inventory_empty"]
    B -- Compra Vac√≠os --> K["üî¥ +1 Cilindro Vac√≠o"]
    K --> L["üíæ Actualiza BD inventory_empty"]
    B -- Llegada Cami√≥n --> M["üì¶ +X Cilindros Llenos"]
    M --> N["üî¥ -Y Cilindros Vac√≠os"]
    N --> O["üíæ Actualiza ambas tablas"]
    F --> P["‚ö° Notifica cambios en tiempo real"]
    H --> P
    J --> P
    L --> P
    O --> P
    P --> Q["üìä Actualiza dashboard jefe"]
    Q --> R["‚úÖ Inventario sincronizado"]

```

## **CU-014: Calcular Rentabilidad**

Calcula autom√°ticamente ganancias considerando precios de compra/venta y gastos

```mermaid

flowchart TD
    A[üí∞ Sistema recibe nueva venta] --> B[üìä Obtiene precio de compra actual]
    B --> C[üíµ Obtiene precio de venta registrado]
    
    C --> D[üßÆ Calcula ganancia por unidad]
    D --> E[üí∞ Ganancia = Precio Venta - Precio Compra]
    
    E --> F{¬øHay gastos del vendedor?}
    F -->|S√≠| G[üí∏ Resta gastos operativos]
    F -->|No| H[üìà Ganancia bruta = Ganancia neta]
    
    G --> I[üìä Ganancia neta = Ganancia - Gastos]
    H --> J[üíæ Actualiza registro de rentabilidad]
    I --> J
    
    J --> K[üìà Actualiza margen diario vendedor]
    K --> L[üìä Actualiza margen total negocio]
    
    L --> M{¬øNuevo precio de compra?}
    M -->|S√≠| N[üîÑ Recalcula todas las ganancias futuras]
    M -->|No| O[‚úÖ C√°lculo completado]
    
    N --> P[üíæ Actualiza costos en BD]
    P --> Q[‚ö° Notifica cambio de rentabilidad]
    Q --> O
```

## CU-015: Resetear Datos Diarios

Proceso autom√°tico a medianoche o (al finalizar dia) que resetea datos del d√≠a y devuelve cilindros no vendidos